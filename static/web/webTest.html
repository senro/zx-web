<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>标题</title>
    <meta name="description" content="描述"/>
    <meta name="keywords" content="关键词"/>
    <meta name="copyright" content="苏州蜗牛数字科技股份有限公司"/>
    <meta name="author" content="584233821@qq.com(senro)"/>
    <link rel="stylesheet" type="text/css" href="http://static.woniu.com/stylesheets/base.css"/>
    <style>
        .btn{
            width: 100%;
            height: 50px;
            background-color: red;
        }
        .btn-camera{
            background-color: green;
        }
        .img{
            width: 100%;
        }
    </style>
</head>
<body>
<div class="btn btn-alert">
    发送消息给手机
</div>
<div class="btn btn-camera">
    调用摄像机
</div>
<img class="img" id="cameraImg" src="" alt=""/>

<script type="text/javascript" src="http://static.woniu.com/script/jquery/jquery-1.9.1.min.js"></script>
<script id="cameraCode" type="text/html">
    navigator.camera.getPicture(onSuccess, onFail, { quality: 50,
    destinationType: Camera.DestinationType.DATA_URL
    });

    function onSuccess(imageData) {
        if(imageData){
            //alert('获取图片成功！');
        }
        //var image = document.getElementById('myImage');
        //image.src = "data:image/jpeg;base64," + imageData;
        $('#iframe')[0].contentWindow.postMessage(imageData,'*');
    }

    function onFail(message) {
        alert('Failed because: ' + message);
    }
</script>
<script type="text/javascript">
    window.addEventListener('message',function(e){
        //alert(e.data);
        $('#cameraImg').attr('src',"data:image/jpeg;base64," + e.data);
        //window.parent.postMessage(color,'*');
    },false);
    alert($('.btn').width());
   //window.parent.alertTest('haha!');
   //window.contactTest();
   $('.btn-alert').click(function(){
       //navigator.notification.alert("i am from zx.yearn.cc",function(){});
       window.parent.postMessage('navigator.notification.alert("i am from zx.yearn.cc",function(){});','*');
       return false;
   });
    $('.btn-camera').click(function(){
        //navigator.notification.alert("i am from zx.yearn.cc",function(){});
        var cameraCode=$('#cameraCode').html();

        window.parent.postMessage(cameraCode,'*');
        return false;
    });

</script>
</body>
</html>